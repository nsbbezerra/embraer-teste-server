<p align="center">
    <?xml version="1.0" encoding="iso-8859-1"?>
<!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
	 viewBox="0 0 512 512" xml:space="preserve" width="100" height="100">
<circle style="fill:#88C5CC;" cx="256" cy="256" r="256"/>
<rect x="124" y="200" style="fill:#406A80;" width="264" height="232"/>
<rect x="108" y="216" style="fill:#E6E6E6;" width="64" height="200"/>
<g>
	<rect x="116" y="216" style="fill:#CCCCCC;" width="8" height="200"/>
	<rect x="136" y="216" style="fill:#CCCCCC;" width="8" height="200"/>
	<rect x="156" y="216" style="fill:#CCCCCC;" width="8" height="200"/>
</g>
<g>
	<rect x="340" y="216" style="fill:#E6E6E6;" width="64" height="200"/>
	<path style="fill:#E6E6E6;" d="M40,512v-32c0-4.4,3.6-8,8-8h416c4.4,0,8,3.6,8,8v32H40z"/>
	<path style="fill:#E6E6E6;" d="M64,472v-32c0-4.4,3.6-8,8-8h368c4.4,0,8,3.6,8,8v32H64z"/>
</g>
<path style="fill:#F5F5F5;" d="M433.656,170.344l-176-120C256.096,48.784,254.048,48,252,48s-4.096,0.784-5.656,2.344l-176,120
	c-1.548,1.544-2.328,3.628-2.344,5.656c-0.016,2.068,0.764,4.08,2.344,5.656C71.908,183.22,73.952,184,76,184h176h176
	c2.048,0,4.092-0.78,5.656-2.344c1.58-1.58,2.36-3.588,2.344-5.656C435.984,173.972,435.204,171.888,433.656,170.344z"/>
<g>
	<polygon style="fill:#CCCCCC;" points="102.184,168 252,65.852 401.816,168 	"/>
	<path style="fill:#CCCCCC;" d="M452,192c0,4.4-3.6,8-8,8H60c-4.4,0-8-3.6-8-8l0,0c0-4.4,3.6-8,8-8h384C448.4,184,452,187.6,452,192
		L452,192z"/>
</g>
<rect x="224" y="216" style="fill:#E6E6E6;" width="64" height="200"/>
<g>
	<rect x="232" y="216" style="fill:#CCCCCC;" width="8" height="200"/>
	<rect x="252" y="216" style="fill:#CCCCCC;" width="8" height="200"/>
	<rect x="272" y="216" style="fill:#CCCCCC;" width="8" height="200"/>
	<rect x="348" y="216" style="fill:#CCCCCC;" width="8" height="200"/>
	<rect x="368" y="216" style="fill:#CCCCCC;" width="8" height="200"/>
	<rect x="388" y="216" style="fill:#CCCCCC;" width="8" height="200"/>
</g>
<g>
	<path style="fill:#F5F5F5;" d="M180,424c0,4.4-3.6,8-8,8h-64c-4.4,0-8-3.6-8-8l0,0c0-4.4,3.6-8,8-8h64C176.4,416,180,419.6,180,424
		L180,424z"/>
	<path style="fill:#F5F5F5;" d="M180,208c0,4.4-3.6,8-8,8h-64c-4.4,0-8-3.6-8-8l0,0c0-4.4,3.6-8,8-8h64C176.4,200,180,203.6,180,208
		L180,208z"/>
	<path style="fill:#F5F5F5;" d="M296,424c0,4.4-3.6,8-8,8h-64c-4.4,0-8-3.6-8-8l0,0c0-4.4,3.6-8,8-8h64C292.4,416,296,419.6,296,424
		L296,424z"/>
	<path style="fill:#F5F5F5;" d="M296,208c0,4.4-3.6,8-8,8h-64c-4.4,0-8-3.6-8-8l0,0c0-4.4,3.6-8,8-8h64C292.4,200,296,203.6,296,208
		L296,208z"/>
	<path style="fill:#F5F5F5;" d="M412,424c0,4.4-3.6,8-8,8h-64c-4.4,0-8-3.6-8-8l0,0c0-4.4,3.6-8,8-8h64C408.4,416,412,419.6,412,424
		L412,424z"/>
	<path style="fill:#F5F5F5;" d="M412,208c0,4.4-3.6,8-8,8h-64c-4.4,0-8-3.6-8-8l0,0c0-4.4,3.6-8,8-8h64C408.4,200,412,203.6,412,208
		L412,208z"/>
</g>
<rect x="64" y="468" style="fill:#CCCCCC;" width="384" height="4"/>
<g>
	<path style="fill:#2179A6;" d="M252,140c-6.616,0-12-5.384-12-12c0-2.208,1.792-4,4-4s4,1.792,4,4c0,2.204,1.796,4,4,4s4-1.796,4-4
		s-1.796-4-4-4c-6.616,0-12-5.384-12-12s5.384-12,12-12s12,5.384,12,12c0,2.208-1.792,4-4,4s-4-1.792-4-4c0-2.204-1.796-4-4-4
		s-4,1.796-4,4s1.796,4,4,4c6.616,0,12,5.384,12,12S258.616,140,252,140z"/>
	<path style="fill:#2179A6;" d="M252,108c-2.208,0-4-1.792-4-4v-8c0-2.208,1.792-4,4-4s4,1.792,4,4v8
		C256,106.208,254.208,108,252,108z"/>
	<path style="fill:#2179A6;" d="M252,148c-2.208,0-4-1.792-4-4v-8c0-2.208,1.792-4,4-4s4,1.792,4,4v8
		C256,146.208,254.208,148,252,148z"/>
</g>
</svg>
    <h1 align="center">My Bank - Server of application - Embraer test</h1>
</p>

## Primeiros Passos

### 1 - Clonando o projeto

```bash
$ git clone https://github.com/nsbbezerra/embraer-teste-server.git
```

```bash
$ cd embraer-teste-server
```

```bash
$ npm install
# ou
$ yarn install
```

### 2 - Configurando do ambiente

`ESTE PROJETO UTILIZA O POSTGRES COMO DB PRINCIPAL`

- Variáveis de Ambiente

  - Adicione nas configurações do servidor, ou crie um arquivo `.env` na raíz do projeto e as seguintes variáveis:
  - `DB_NAME`
  - `DB_USER`
  - `DB_PASSWORD`
  - `PORT` - Porta onde a aplicação irá iniciar.

- Scripts Obrigatórios

  - Migrations

  ```bash
  $ npm run make:migrations
  # ou
  $ yarn make:migrations
  ```

  - Seeds

  ```bash
  $ npm run make:seeds
  # ou
  $ yarn make:seeds
  ```

### 3 - Iniciando a aplicação

- Ambiente de Desenvolvimento

```bash
$ npm run dev
# ou
$ yarn dev
```

Se tudo estiver configurado corretamente você terá um output no terminal: `API is running on port: PORTA SELECIONADA`

### 4 - Rotas da aplicação

Para realizar login: `GET - {{baseURL}}/login`

#### Retorno:

```json
{
  "id": 1,
  "name": "John Doe",
  "balance": "10000,00"
}
```

Para buscar os extratos: `GET - {{baseURL}}/statements/{clientId}`

#### Retorno:

```json
[
    {
        "id": 1,
        "client_id": 1,
        "total": 1000.00,
        "createdAt": 2023-01-11 21:54:23.88349+00,
        "updatedAt": 2023-01-11 21:54:23.88349+00,
    }
]
```

Para realizar um saque: `POST - {{baseURL}}/withdraw/{clientId}`, passando como parâmetro no body `{ amount: 1000 }` que é o valor do saque

#### Retorno:

```json
"banknotes": [
    {
        "id": 1,
        "banknoteValue": 100, //Valor da cédula
        "amount": 10 //Quantidade de cédulas relativas ao valor para realizar o saque
    }
]

"balance": 1000 //Valor atualizado do saldo do cliente
```

### 5 - Testes unitários

Para rodar os teste unitário use o seguinte comando:

```bash
$ npm run test
# ou
$ yarn test
```

### 6 - Build e produção

Build

```bash
$ npm run build
# ou
$ yarn build
```

Versão final

```bash
$ npm run start
# ou
$ yarn start
```

### 7 - Bibliotecas e Frameworks utilizados:

- [Node JS + Typescript](https://nodejs.org/en/)
- [Express](https://expressjs.com/pt-br/)
- [Cors](https://github.com/expressjs/cors)
- [Knex](https://knexjs.org/)
- [Postgres](https://www.postgresql.org/)

### Autor

[<img src="https://avatars.githubusercontent.com/u/44842023?s=400&u=2a8f0844c691b0d32eb0d243edc8eebf226f5b5f&v=4" width=115><br><sub>Natanael Bezerra</sub>](https://github.com/nsbbezerra)
